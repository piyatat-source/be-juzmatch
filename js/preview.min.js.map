{"version":3,"sources":["js\\preview.js"],"names":["$","ew","_interopDefaultLegacy","e","default","$__default","ew__default","PREVIEW_TEMPLATE","PREVIEW_LOADING_HTML","spinnerClass","language","phrase","PREVIEW_MODAL_HTML","PREVIEW_MODAL_CLASS","PREVIEW_MODAL_OPTIONS","PREVIEW_MODAL_DIALOG","PREVIEW_OFFCANVAS_HTML","PREVIEW_OFFCANVAS_PLACEMENT","PREVIEW_OFFCANVAS_OPTIONS","PREVIEW_OFFCANVAS_SIDEBAR","showPreviewRow","$el","this","closest","$r","is","$content","find","$tbl","attr","row","r","$tb","PREVIEW_SINGLE_ROW","remove","not","colSpan","Array","from","cells","reduce","acc","cur","$sr","nextAll","data","first","hasClass","insertRow","sectionRowIndex","addClass","insertCell","prop","addRowToTable","$cell","id","random","empty","append","children","slideUp","clone","tab","slideDown","setupTable","detailPopover","i","btn","_bootstrap$Tooltip$ge","bootstrap","Popover","getInstance","$parent","Tooltip","dispose","PREVIEW_SELECTOR","classList","contains","add","inst","html","delay","PREVIEW_POPOVER_DELAY","placement","PREVIEW_POPOVER_PLACEMENT","container","document","getElementById","content","sanitizeFn","customClass","trigger","PREVIEW_POPOVER_TRIGGER","$tip","getTipElement","addEventListener","_getActivePopover","getActivePopover","hide","_bootstrap$Popover$ge","getAttribute","show","detailModal","_bootstrap$Tooltip$ge2","modal","detailOffcanvas","_bootstrap$Tooltip$ge3","offcanvas","tabShow","el","currentTarget","target","dataset","bsTarget","$target","url","start","table","sort","sortOrder","params","tooltip","isNumber","encodeURIComponent","includes","shiftKey","ctrlKey","get","selector","$btns","removeClass","$navitem","$dropbtn","role","prepend","on","Event","$tabpane","done","_getActivePopover2","_bootstrap$Modal$getI","update","querySelector","Modal","handleUpdate","tabHide","dropdown","popover","preview","lazyLoad","initPanels","each","initTooltips","initLightboxes","initIcons","initExpandableTable","_e$target","initTabs","_e$target2","Object","assign","PREVIEW_POPOVER","evt","_getActivePopover3","PREVIEW_MODAL","$this","parentId","PREVIEW_OFFCANVAS","PREVIEW_ROW","jQuery"],"mappings":"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","sourcesContent":["/*!\n * Detail Preview for PHPMaker v2022.7.0\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function ($, ew) {\n  'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($);\n  var ew__default = /*#__PURE__*/_interopDefaultLegacy(ew);\n\n  ew__default[\"default\"].PREVIEW_TEMPLATE = \"<div class=\\\"ew-nav\\\"><!-- .ew-nav -->\\n    <ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\"></ul>\\n    <div class=\\\"tab-content\\\"><!-- .tab-content -->\\n        <div class=\\\"tab-pane fade\\\" role=\\\"tabpanel\\\"></div>\\n    </div><!-- /.tab-content -->\\n</div><!-- /.ew-nav -->\";\r\n  ew__default[\"default\"].PREVIEW_LOADING_HTML = '<div class=\"' + ew__default[\"default\"].spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"visually-hidden\">' + ew__default[\"default\"].language.phrase(\"Loading\") + '</span></div>';\r\n  ew__default[\"default\"].PREVIEW_MODAL_HTML = '<div id=\"ew-preview-dialog\" class=\"' + ew__default[\"default\"].PREVIEW_MODAL_CLASS + '\" role=\"dialog\" aria-hidden=\"true\"><div class=\"modal-dialog modal-xl\"><div class=\"modal-content\"><div class=\"modal-body\"></div><div class=\"modal-footer\"><button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">' + ew__default[\"default\"].language.phrase(\"CloseBtn\") + '</button></div></div></div></div>';\r\n  ew__default[\"default\"].PREVIEW_MODAL_OPTIONS = {};\r\n  ew__default[\"default\"].PREVIEW_MODAL_DIALOG = null;\r\n  ew__default[\"default\"].PREVIEW_OFFCANVAS_HTML = \"<div id=\\\"ew-preview-offcanvas\\\" class=\\\"offcanvas offcanvas-\" + ew__default[\"default\"].PREVIEW_OFFCANVAS_PLACEMENT + \"\\\" data-bs-scroll=\\\"true\\\" tabindex=\\\"-1\\\" aria-labelledby=\\\"ew-preview-offcanvas-label\\\"><div class=\\\"offcanvas-header\\\"><h5 id=\\\"ew-preview-offcanvas-label\\\">\" + ew__default[\"default\"].language.phrase(\"Details\") + \"</h5><button type=\\\"button\\\" class=\\\"btn-close text-reset\\\" data-bs-dismiss=\\\"offcanvas\\\" aria-label=\\\"Close\\\"></button></div><div class=\\\"offcanvas-body\\\"></div></div>\";\r\n  ew__default[\"default\"].PREVIEW_OFFCANVAS_OPTIONS = {};\r\n  ew__default[\"default\"].PREVIEW_OFFCANVAS_SIDEBAR = null; // Add preview row\r\n\r\n  let addRowToTable = function (r) {\r\n    let $r = $__default[\"default\"](r),\r\n        $tb = $r.closest(\"tbody\"),\r\n        row;\r\n\r\n    if (ew__default[\"default\"].PREVIEW_SINGLE_ROW) {\r\n      $tb.find(\"tr.ew-table-preview-row\").remove();\r\n      $tb.find(\"tr[aria-expanded]\").not(r).attr(\"aria-expanded\", \"false\");\r\n    }\r\n\r\n    let colSpan = Array.from(r.cells).reduce((acc, cur) => acc + cur.colSpan, 0),\r\n        $sr = $r.nextAll(\"tr[data-rowindex!=\" + $r.data(\"rowindex\") + \"]\").first();\r\n\r\n    if ($sr.hasClass(\"ew-table-preview-row\")) {\r\n      // Preview row exists\r\n      return $sr[0];\r\n    } else if (row = $tb[0].insertRow($sr[0] ? $sr[0].sectionRowIndex : -1)) {\r\n      // Insert a new row\r\n      $__default[\"default\"](row).addClass(\"ew-table-preview-row expandable-body\");\r\n      $__default[\"default\"](row.insertCell(0)).addClass(\"ew-table-last-col\").prop(\"colSpan\", colSpan);\r\n    }\r\n\r\n    return row;\r\n  }; // Show preview row\r\n\r\n  let showPreviewRow = function () {\r\n    let $el = $__default[\"default\"](this).closest(\"tr\"),\r\n        isRow = $el.is(\"tr[data-rowindex]\"),\r\n        $r = isRow ? $el : $el.closest(\"tr[data-rowindex]\"),\r\n        $content = $r.find(\"[class$=_preview] .ew-preview\"),\r\n        $tbl = $r.closest(\"table\");\r\n    if (!$r[0] || !$content[0]) return;\r\n\r\n    if ($r.attr(\"aria-expanded\") === \"true\") {\r\n      let row = addRowToTable($r[0]),\r\n          $cell = $__default[\"default\"](row.cells[0]),\r\n          id = \"target\" + ew__default[\"default\"].random();\r\n      $cell.empty(); // Note: do not chain\r\n\r\n      $cell.append(ew__default[\"default\"].PREVIEW_TEMPLATE); // Append the contents\r\n\r\n      $cell.children().slideUp(0);\r\n      $cell.find(\".nav-tabs, .nav-pills\").append($content.find(\".nav-item\").clone(true)); // Append tabs\r\n\r\n      $cell.find(\".tab-pane\").attr(\"id\", id);\r\n      $cell.find(\"[data-bs-toggle='tab']\").attr({\r\n        \"data-bs-target\": \"#\" + id,\r\n        \"aria-controls\": id\r\n      }) // Setup tabs\r\n      .first().tab(\"show\"); // Show the first tab\r\n\r\n      $cell.children().slideDown(500); // Match AdminLTE ExpandableTable\r\n    }\r\n\r\n    ew__default[\"default\"].setupTable(-1, $tbl[0], true); // ew.fixLayoutHeight();\r\n  }; // Setup preview popover\r\n\r\n  let detailPopover = function (i, btn) {\r\n    var _bootstrap$Tooltip$ge;\r\n\r\n    if (bootstrap.Popover.getInstance(btn)) return;\r\n    let $parent = $__default[\"default\"](btn.closest(\".ew-list-option-body\"));\r\n    (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(btn)) == null ? void 0 : _bootstrap$Tooltip$ge.dispose(); // Dispose tooltip, if any\r\n\r\n    btn = btn.closest(ew__default[\"default\"].PREVIEW_SELECTOR);\r\n    if (!btn) return;\r\n    if (!btn.classList.contains(\"ew-preview-btn\")) btn.classList.add(\"ew-preview-btn\");\r\n    let inst = new bootstrap.Popover(btn, {\r\n      html: true,\r\n      delay: ew__default[\"default\"].PREVIEW_POPOVER_DELAY,\r\n      placement: ew__default[\"default\"].PREVIEW_POPOVER_PLACEMENT,\r\n      container: document.getElementById(\"ew-tooltip\"),\r\n      content: ew__default[\"default\"].PREVIEW_LOADING_HTML,\r\n      sanitizeFn: ew__default[\"default\"].sanitizeFn,\r\n      customClass: \"ew-preview-popover\",\r\n      trigger: ew__default[\"default\"].PREVIEW_POPOVER_TRIGGER == \"click\" ? \"click\" : \"manual\"\r\n    });\r\n    let $tip = $__default[\"default\"](inst.getTipElement());\r\n    btn.addEventListener(\"show.bs.popover\", () => {\r\n      var _getActivePopover;\r\n\r\n      return (_getActivePopover = getActivePopover()) == null ? void 0 : _getActivePopover.hide();\r\n    });\r\n    btn.addEventListener(\"shown.bs.popover\", () => {\r\n      let id = \"target\" + ew__default[\"default\"].random();\r\n      $tip.find(\".popover-body\").empty().html(ew__default[\"default\"].PREVIEW_TEMPLATE); // Add the preview template\r\n\r\n      $tip.find(\".nav-tabs, .nav-pills\").append($parent.find(\".nav-item\").clone(true)); // Append tabs\r\n\r\n      $tip.find(\".tab-pane\").attr(\"id\", id);\r\n      $tip.find(\"[data-bs-toggle='tab']\").attr({\r\n        \"data-bs-target\": \"#\" + id,\r\n        \"aria-controls\": id\r\n      }) // Setup tabs\r\n      .first().tab(\"show\"); // Show the first tab\r\n    });\r\n\r\n    if (ew__default[\"default\"].PREVIEW_POPOVER_TRIGGER != \"click\") {\r\n      btn.addEventListener(ew__default[\"default\"].PREVIEW_POPOVER_TRIGGER, function () {\r\n        var _bootstrap$Popover$ge;\r\n\r\n        if (this.getAttribute(\"aria-describedby\")) // Showing\r\n          return;\r\n        (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(this)) == null ? void 0 : _bootstrap$Popover$ge.show();\r\n      });\r\n    }\r\n  }; // Setup preview modal\r\n\r\n  let detailModal = function (i, btn) {\r\n    var _bootstrap$Tooltip$ge2;\r\n\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance(btn)) == null ? void 0 : _bootstrap$Tooltip$ge2.dispose(); // Dispose tooltip, if any\r\n\r\n    btn = btn.closest(ew__default[\"default\"].PREVIEW_SELECTOR);\r\n    if (!btn) return;\r\n    if (!btn.classList.contains(\"ew-preview-btn\")) btn.classList.add(\"ew-preview-btn\");\r\n    btn.addEventListener(\"click\", () => {\r\n      ew__default[\"default\"].PREVIEW_MODAL_DIALOG.attr(\"data-parent-id\", this.closest(\"[id^=el]\").id).modal(\"hide\"); // Find id=\"el<n>_tablename_preview\"\r\n\r\n      ew__default[\"default\"].PREVIEW_MODAL_DIALOG.modal(\"show\");\r\n    });\r\n  }; // Setup preview offcanvas\r\n\r\n  let detailOffcanvas = function (i, btn) {\r\n    var _bootstrap$Tooltip$ge3;\r\n\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(btn)) == null ? void 0 : _bootstrap$Tooltip$ge3.dispose(); // Dispose tooltip, if any\r\n\r\n    btn = btn.closest(ew__default[\"default\"].PREVIEW_SELECTOR);\r\n    if (!btn) return;\r\n    if (!btn.classList.contains(\"ew-preview-btn\")) btn.classList.add(\"ew-preview-btn\");\r\n    btn.addEventListener(\"click\", () => {\r\n      ew__default[\"default\"].PREVIEW_OFFCANVAS_SIDEBAR.attr(\"data-parent-id\", this.closest(\"[id^=el]\").id).offcanvas(\"hide\"); // Find id=\"el<n>_tablename_preview\"\r\n\r\n      ew__default[\"default\"].PREVIEW_OFFCANVAS_SIDEBAR.offcanvas(\"show\");\r\n    });\r\n  }; // Tab \"show\" event\r\n\r\n  let tabShow = function (e) {\r\n    let el = e.currentTarget,\r\n        target = el.dataset.bsTarget || el.closest(\".tab-pane\"); // Tab or Paging/Sorting links\r\n\r\n    if (!target) return;\r\n    let $el = $__default[\"default\"](el),\r\n        $target = $__default[\"default\"](target),\r\n        url = el.dataset.url,\r\n        start = $el.data(\"start\"),\r\n        // Get as number\r\n    table = el.dataset.table,\r\n        sort = el.dataset.sort,\r\n        sortOrder = el.dataset.sortOrder,\r\n        params = \"\",\r\n        data;\r\n\r\n    if (url) {\r\n      // Tab\r\n      data = $target.data(table) || {};\r\n      data.url = url;\r\n      start = data.start || 1;\r\n      sort = data.sort;\r\n      sortOrder = data.sortOrder;\r\n    } else if (start) {\r\n      // Paging link\r\n      $el.tooltip(\"hide\");\r\n      data = $target.data(table);\r\n      url = data.url;\r\n      data.start = start || 1;\r\n      sort = data.sort;\r\n      sortOrder = data.sortOrder;\r\n    } else if (sort) {\r\n      // Sorting link\r\n      data = $target.data(table);\r\n      url = data.url;\r\n      if (sort !== data.sort || sortOrder !== data.sortOrder) // Reset\r\n        data.start = start = 1;else start = data.start;\r\n      data.sort = sort;\r\n      data.sortOrder = sortOrder;\r\n    }\r\n\r\n    $target.data(table, data).empty().html(ew__default[\"default\"].PREVIEW_LOADING_HTML);\r\n    if ($__default[\"default\"].isNumber(start)) params += \"&start=\" + start;\r\n\r\n    if (sort) {\r\n      params += \"&sort=\" + encodeURIComponent(sort);\r\n      if ([\"ASC\", \"DESC\", \"NO\"].includes(sortOrder)) params += \"&sortorder=\" + sortOrder;\r\n      if (e.shiftKey && !e.ctrlKey) params += \"&cmd=resetsort\";else if (e.ctrlKey && $el.data(\"sortType\") == 2) params += \"&ctrl=1\";\r\n    }\r\n\r\n    $__default[\"default\"].get(url + params, data => {\r\n      $target.empty().html(data); // Append the detail records\r\n\r\n      let selector = \".ew-detail-btn-group[data-table='\" + table + \"'][data-url='\" + url + \"']\",\r\n          $btns = $target.closest(\".ew-nav\").find(selector); // Detail buttons\r\n\r\n      if (!$btns[0]) // Maybe moved to body\r\n        $btns = $__default[\"default\"](\"body\").children(selector);\r\n\r\n      if ($btns.is(\"div\")) {\r\n        // Buttons\r\n        $target.append($btns.removeClass(\"d-none\")); // Append the buttons\r\n      } else if ($btns.is(\"ul\")) {\r\n        // Dropdown menu\r\n        let $navitem = $el.closest(\".nav-item\").addClass(\"dropdown\"),\r\n            $dropbtn = $navitem.find(\".dropdown-toggle\").addClass(\"active\").removeClass(\"d-none\");\r\n\r\n        if (!$dropbtn[0]) {\r\n          $dropbtn = $el.clone();\r\n          $dropbtn.addClass(\"dropdown-toggle\") // Change nav link to dropdown button\r\n          .attr({\r\n            \"data-bs-toggle\": \"dropdown\",\r\n            \"data-bs-target\": null,\r\n            \"role\": \"button\"\r\n          }); // Note: Remove data-bs-target attribute\r\n\r\n          $navitem.prepend($dropbtn); // Note: Use .prepend()\r\n\r\n          $el.on(\"hide.bs.tab\", () => {\r\n            $navitem.removeClass(\"dropdown\").find($el).removeClass(\"d-none active\");\r\n            $navitem.find(\".dropdown-toggle\").addClass(\"d-none\").removeClass(\"active show\");\r\n          });\r\n        }\r\n\r\n        $el.addClass(\"d-none\");\r\n      }\r\n\r\n      $target.find(\".ew-pager .btn:not(.disabled), .ew-table-header > th > div[data-sort]\").data({\r\n        \"target\": target,\r\n        \"table\": table\r\n      }).on(\"click\", tabShow); // Setup buttons for paging/sorting\r\n\r\n      $__default[\"default\"](document).trigger($__default[\"default\"].Event(\"preview\", {\r\n        target: $target[0],\r\n        $tabpane: $target\r\n      }));\r\n    }).done(() => {\r\n      var _getActivePopover2, _bootstrap$Modal$getI;\r\n\r\n      (_getActivePopover2 = getActivePopover()) == null ? void 0 : _getActivePopover2.update(); // Update popover\r\n\r\n      let modal = document.querySelector(\"#ew-preview-dialog\");\r\n      if (modal != null && modal.classList.contains(\"show\")) (_bootstrap$Modal$getI = bootstrap.Modal.getInstance(modal)) == null ? void 0 : _bootstrap$Modal$getI.handleUpdate(); // Update modal\r\n    });\r\n  }; // Tab \"hide\" event\r\n\r\n  let tabHide = function (e) {\r\n    // Dispose dropdowns inside the tab\r\n    $__default[\"default\"](e.currentTarget.dataset.bsTarget).find(\".dropdown-toggle[id]\").dropdown(\"dispose\"); // Hide all other dropdown menus\r\n\r\n    let container = e.currentTarget.closest(\".popover, .modal, .nav\");\r\n    if (container) $__default[\"default\"](container).find(\".dropdown-toggle\").dropdown(\"hide\");\r\n  }; // Get active preview button\r\n\r\n  let getActivePopover = () => {\r\n    let popover = document.querySelector(\".ew-preview-popover.show\");\r\n    if (!popover) // Popover closed\r\n      return null;\r\n    let btn = document.querySelector(\".ew-preview-btn[aria-describedby='\" + popover.id + \"']\");\r\n    if (btn) return bootstrap.Popover.getInstance(btn);\r\n    return null;\r\n  }; // Default preview event\r\n\r\n  let preview = function (e) {\r\n    ew__default[\"default\"].lazyLoad(e); // Load images\r\n\r\n    ew__default[\"default\"].initPanels(e.$tabpane[0]); // Init panels\r\n\r\n    e.$tabpane.find(\"table.ew-table\").each(ew__default[\"default\"].setupTable); // Setup the table\r\n\r\n    ew__default[\"default\"].initTooltips(e); // Init tooltips\r\n\r\n    ew__default[\"default\"].initLightboxes(e); // Init lightboxes\r\n\r\n    ew__default[\"default\"].initIcons(e); // Init icons\r\n  }; // Init expandable table\r\n\r\n  let initExpandableTable = function (e) {\r\n    var _e$target;\r\n\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document;\r\n    $__default[\"default\"](el).find(\"tr[data-rowindex][data-widget='expandable-table']\").on(\"expanded.lte.expandableTable\", showPreviewRow); // Add \"expanded\" handler to rows\r\n  }; // Init tabs\r\n\r\n  let initTabs = function (e) {\r\n    var _e$target2;\r\n\r\n    let el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n    $__default[\"default\"](el).find(\".ew-preview [data-bs-toggle='tab']\").on(\"show.bs.tab\", tabShow).on(\"hide.bs.tab\", tabHide);\r\n  }; // Extend\r\n\r\n  Object.assign(ew__default[\"default\"], {\r\n    showPreviewRow,\r\n    detailPopover,\r\n    detailModal,\r\n    detailOffcanvas\r\n  }); // Init preview\r\n\r\n  $__default[\"default\"](function () {\r\n    // Handle \"preview\" event\r\n    $__default[\"default\"](document).on(\"preview\", preview); // Setup events and tab links\r\n\r\n    if (ew__default[\"default\"].PREVIEW_POPOVER) {\r\n      // Popover\r\n      $__default[\"default\"](\".ew-preview-btn\").each(detailPopover);\r\n      document.addEventListener(\"click\", evt => {\r\n        var _getActivePopover3;\r\n\r\n        if (!evt.target.closest(\".ew-preview-popover\")) // Outside popover\r\n          (_getActivePopover3 = getActivePopover()) == null ? void 0 : _getActivePopover3.hide(); // Outside popover\r\n      });\r\n    } else if (ew__default[\"default\"].PREVIEW_MODAL) {\r\n      // Modal\r\n      if (!document.getElementById(\"ew-preview-dialog\")) $__default[\"default\"](\"body\").append(ew__default[\"default\"].PREVIEW_MODAL_HTML);\r\n      ew__default[\"default\"].PREVIEW_MODAL_DIALOG = $__default[\"default\"](\"#ew-preview-dialog\").modal(ew__default[\"default\"].PREVIEW_MODAL_OPTIONS);\r\n      $__default[\"default\"](\"#ew-preview-dialog\").on(\"show.bs.modal\", function () {\r\n        $__default[\"default\"](this).find(\".modal-body\").empty().html(ew__default[\"default\"].PREVIEW_TEMPLATE); // Add the preview template\r\n      }).on(\"shown.bs.modal\", function (e) {\r\n        let $this = $__default[\"default\"](this),\r\n            id = \"target\" + ew__default[\"default\"].random();\r\n        $this.find(\".nav-tabs, .nav-pills\").append($__default[\"default\"](\"#\" + this.dataset.parentId).find(\".nav-item\").clone(true)); // Append tabs\r\n\r\n        $this.find(\".tab-pane\").attr(\"id\", id);\r\n        $this.find(\"[data-bs-toggle='tab']\").attr({\r\n          \"data-bs-target\": \"#\" + id,\r\n          \"aria-controls\": id\r\n        }) // Setup tabs\r\n        .first().tab(\"show\"); // Show the first tab\r\n      });\r\n      $__default[\"default\"](\".ew-preview-btn\").each(detailModal);\r\n    } else if (ew__default[\"default\"].PREVIEW_OFFCANVAS) {\r\n      // Offcanvas\r\n      if (!document.getElementById(\"ew-preview-offcanvas\")) $__default[\"default\"](\"body\").append(ew__default[\"default\"].PREVIEW_OFFCANVAS_HTML);\r\n      ew__default[\"default\"].PREVIEW_OFFCANVAS_SIDEBAR = $__default[\"default\"](\"#ew-preview-offcanvas\").offcanvas(ew__default[\"default\"].PREVIEW_OFFCANVAS_OPTIONS);\r\n      $__default[\"default\"](\"#ew-preview-offcanvas\").on(\"show.bs.offcanvas\", function () {\r\n        $__default[\"default\"](this).find(\".offcanvas-body\").empty().html(ew__default[\"default\"].PREVIEW_TEMPLATE); // Add the preview template\r\n      }).on(\"shown.bs.offcanvas\", function () {\r\n        let $this = $__default[\"default\"](this),\r\n            id = \"target\" + ew__default[\"default\"].random();\r\n        $this.find(\".nav-tabs, .nav-pills\").append($__default[\"default\"](\"#\" + this.dataset.parentId).find(\".nav-item\").clone(true)); // Append tabs\r\n\r\n        $this.find(\".tab-pane\").attr(\"id\", id);\r\n        $this.find(\"[data-bs-toggle='tab']\").attr({\r\n          \"data-bs-target\": \"#\" + id,\r\n          \"aria-controls\": id\r\n        }) // Setup tabs\r\n        .first().tab(\"show\"); // Show the first tab\r\n      });\r\n      $__default[\"default\"](\".ew-preview-btn\").each(detailOffcanvas);\r\n    } else if (ew__default[\"default\"].PREVIEW_ROW) {\r\n      // Preview rows\r\n      initExpandableTable();\r\n    }\r\n\r\n    initTabs();\r\n    $__default[\"default\"](\".ew-multi-column-grid\").on(\"layout\", function (e) {\r\n      if (ew__default[\"default\"].PREVIEW_ROW) initExpandableTable(e);\r\n      initTabs(e);\r\n    });\r\n  });\n\n})(jQuery, ew);\n"]}